
<!DOCTYPE html>
<html class="writer-html5" lang="ru" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ECOS Артефакты &mdash; ECOS</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/main_theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/translations.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Алфавитный указатель" href="../genindex.html" />
    <link rel="search" title="Поиск" href="../search.html" />
    <link rel="next" title="ECOS Приложения" href="ecos_applications.html" />
    <link rel="prev" title="Конструктор low-code" href="../%D0%91%D0%B0%D0%B7%D0%B0%20%D0%B7%D0%BD%D0%B0%D0%BD%D0%B8%D0%B9%20%D0%BF%D0%BE%20%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B5.html" />


 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Citeck ECOS
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Поиск в документации" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Меню навигации">
              <p class="caption" role="heading"><span class="caption-text">Знакомство с ECOS</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../%D0%92%D0%B2%D0%B5%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5.html">Знакомство с ECOS</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Раздел 2</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../%D0%9F%D1%80%D0%B8%D0%BC%D0%B5%D1%80%20%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B8%20%D0%BF%D1%80%D0%BE%D1%86%D0%B5%D1%81%D1%81%D0%B0.html">Пример создания приложения ECOS</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Раздел 3</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../%D0%91%D0%B0%D0%B7%D0%B0%20%D0%B7%D0%BD%D0%B0%D0%BD%D0%B8%D0%B9%20%D0%BF%D0%BE%20%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B5.html">Конструктор low-code</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">ECOS Артефакты</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id2">Определения</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id3">Типы артефактов</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id4">Переопределение артефактов</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id5">Создание нового типа артефакта</a></li>
<li class="toctree-l3"><a class="reference internal" href="#yaml">YAML формат артефакта</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id6">Патчи для артефактов</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id7">Типы патчей</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id9">Отображение артефактов разных категорий</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ecos_applications.html">ECOS Приложения</a></li>
<li class="toctree-l2"><a class="reference internal" href="%D0%A2%D0%B8%D0%BF%D1%8B_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85.html">Типы данных</a></li>
<li class="toctree-l2"><a class="reference internal" href="Aspects.html">Аспекты</a></li>
<li class="toctree-l2"><a class="reference internal" href="interface.html">Интерфейс</a></li>
<li class="toctree-l2"><a class="reference internal" href="ui_actions.html">Действия</a></li>
<li class="toctree-l2"><a class="reference internal" href="%D0%9F%D1%80%D0%BE%D1%86%D0%B5%D1%81%D1%81%D1%8B.html">Бизнес-процессы</a></li>
<li class="toctree-l2"><a class="reference internal" href="notifications.html">Уведомления</a></li>
<li class="toctree-l2"><a class="reference internal" href="Admin_Page.html">Страница администратора</a></li>
<li class="toctree-l2"><a class="reference internal" href="%D0%A2%D0%B5%D0%BC%D1%8B_%D0%B8%D0%BD%D1%82%D0%B5%D1%80%D1%84%D0%B5%D0%B9%D1%81%D0%B0.html">Настройка темы интерфейса</a></li>
<li class="toctree-l2"><a class="reference internal" href="Best_practice.html">Best practice</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Администрирование</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../%D0%90%D0%B4%D0%BC%D0%B8%D0%BD%D0%B8%D1%81%D1%82%D1%80%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5.html">Администрирование</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Архитектура</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../%D0%90%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0.html">Архитектура</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Общая база знаний</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../general/%D0%A2%D0%B5%D1%80%D0%BC%D0%B8%D0%BD%D1%8B.html">Термины</a></li>
<li class="toctree-l1"><a class="reference internal" href="../general/ECOS_Records.html">ECOS Records API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../general/ECOS_Records_examples.html">Примеры запросов ECOS Records</a></li>
<li class="toctree-l1"><a class="reference internal" href="../general/ecos_data.html">ECOS Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../general/System_attributes.html">Системные атрибуты</a></li>
<li class="toctree-l1"><a class="reference internal" href="../general/%D0%AF%D0%B7%D1%8B%D0%BA_%D0%BF%D1%80%D0%B5%D0%B4%D0%B8%D0%BA%D0%B0%D1%82%D0%BE%D0%B2.html">Язык предикатов</a></li>
<li class="toctree-l1"><a class="reference internal" href="../general/Transactions.html">Транзакции в ECOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../general/Commands.html">Команды</a></li>
<li class="toctree-l1"><a class="reference internal" href="../general/Aspects.html">Аспекты</a></li>
<li class="toctree-l1"><a class="reference internal" href="../general/Microservices.html">Микросервисы</a></li>
<li class="toctree-l1"><a class="reference internal" href="../general/ECOS_WebAPI.html">ECOS WebAPI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../general/%D0%93%D0%B5%D0%BD%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D1%8F%20%D0%B4%D0%BE%D0%BA%D1%83%D0%BC%D0%B5%D0%BD%D1%82%D0%BE%D0%B2.html">Микросервис Трансформации. Генерация документов по шаблонам</a></li>
<li class="toctree-l1"><a class="reference internal" href="../general/Preview.html">Предпросмотр документов</a></li>
<li class="toctree-l1"><a class="reference internal" href="../general/Events.html">Работа с событиями (events)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../general/Processes.html">Бизнес-процессы</a></li>
<li class="toctree-l1"><a class="reference internal" href="../general/Alfresco.html">Alfresco и информация о миграции</a></li>
<li class="toctree-l1"><a class="reference internal" href="../general/How_To.html">How To</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Интеграции</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../integration/API%20ECOS%20%D0%B4%D0%BB%D1%8F%20%D0%B2%D0%BD%D0%B5%D1%88%D0%BD%D0%B8%D1%85%20%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC.html">Примеры использования Records API для внешних систем</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integration/Camel_DSL.html">Использование Camel DSL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integration/data%20sources.html">Источники данных</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integration/records%20sources.html">Создание новых источников записей через Web интерфейс</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integration/OSGI.html">Функционал загрузки OSGI пакетов</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integration/Filesystem%20Export.html">Выгрузка записей из любой базы данных в файловую систему микросервиса интеграции</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integration/Mail%20Processing.html">Импорт писем IMAP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integration/file_import.html">Файловый импорт в систему</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integration/2_instances.html">Общение между двумя и более инстансами ECOS’а через команды и события</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integration/EDI_integration.html">Интеграция с ЭДО провайдерами</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integration/Counterparties%20sync.html">Синхронизация контрагентов</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integration/currency.html">Интеграция курсов валют</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integration/ECOS%20Synchronization.html">Поддержка выгрузки нод alfresco в таблицу базы данных</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Раздел 8</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../%D0%9C%D0%BE%D0%B1%D0%B8%D0%BB%D1%8C%D0%BD%D0%BE%D0%B5%20%D0%BF%D1%80%D0%B8%D0%BB%D0%BE%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5.html">Мобильное приложение</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Меню навигации для мобильных устройств" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Citeck ECOS</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Навигация по страницам">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../%D0%91%D0%B0%D0%B7%D0%B0%20%D0%B7%D0%BD%D0%B0%D0%BD%D0%B8%D0%B9%20%D0%BF%D0%BE%20%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B5.html">Конструктор low-code</a> &raquo;</li>
      <li>ECOS Артефакты</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/settings_kb/ecos_artifacts.rst.txt" rel="nofollow"> Просмотреть исходный код страницы</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="ecos">
<span id="ecos-artifacts"></span><h1><a class="toc-backref" href="#id11">ECOS Артефакты</a><a class="headerlink" href="#ecos" title="Ссылка на этот заголовок"></a></h1>
<div class="contents topic" id="id1">
<p class="topic-title">Содержание</p>
<ul class="simple">
<li><p><a class="reference internal" href="#ecos" id="id11">ECOS Артефакты</a></p>
<ul>
<li><p><a class="reference internal" href="#id2" id="id12">Определения</a></p></li>
<li><p><a class="reference internal" href="#id3" id="id13">Типы артефактов</a></p></li>
<li><p><a class="reference internal" href="#id4" id="id14">Переопределение артефактов</a></p></li>
<li><p><a class="reference internal" href="#id5" id="id15">Создание нового типа артефакта</a></p></li>
<li><p><a class="reference internal" href="#yaml" id="id16">YAML формат артефакта</a></p></li>
<li><p><a class="reference internal" href="#id6" id="id17">Патчи для артефактов</a></p></li>
<li><p><a class="reference internal" href="#id9" id="id18">Отображение артефактов разных категорий</a></p></li>
</ul>
</li>
</ul>
</div>
<section id="id2">
<h2><a class="toc-backref" href="#id12">Определения</a><a class="headerlink" href="#id2" title="Ссылка на этот заголовок"></a></h2>
<p><strong>Артефакт</strong> - единица расширения в Citeck ECOS. Артефактами являются формы, журналы, типы, матрицы прав, действия, описания процессов и многие другие сущности в системе.</p>
<p>Микросервис ecos-apps управляет артефактами, ведя их версионность и доставляя их до целевого микросервиса. Контент артефактов в системе неизменяемый и при любом изменении артефакта всегда создается новая версия, а старая сохраняется в списке версий.</p>
<p>Примеры артефактов: <span class="guilabel">Тип</span>, <span class="guilabel">Форма</span>, <span class="guilabel">Журнал</span>.</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>Тип данных</strong> - основной артефакт ECM, описывающий объект. В типе данных определяются метаданные, которые будет содержать объект, статусы жизненного цикла, роли, которые могут работать с объектом. Тип данных связан с формой и журналом.</p></li>
<li><p><strong>Форма</strong> - графическое представление объекта в виде набора элементов интерфейса для манипуляции данными объекта. Элементы интерфейса ссылаются на атрибуты, заданные в типе данных.</p></li>
<li><p><strong>Журнал</strong> - табличная форма представления объектов с возможностью настройки отображения столбцов, фильтрации и манипуляции объектами. Столбцы соответствует данным объекта или могут вычисляться на их основе.</p></li>
</ul>
</div></blockquote>
<p>Тип артефакта как правило состоит из двух частей разделенных символом <code class="docutils literal notranslate"><span class="pre">/</span></code>.</p>
<ul class="simple">
<li><p>Первая часть - это область системы к которой относится артефакт. Обычно за одну область отвечает один микросервис.</p></li>
<li><p>Вторая часть - локальный идентификатор типа</p></li>
</ul>
<p>Например, в типе <code class="docutils literal notranslate"><span class="pre">ui/form</span></code> <strong>ui</strong> - это область, а <strong>form</strong> - локальный идентификатор.</p>
<p><strong>Расположение артефактов</strong></p>
<p>Все артефакты располагаются в директориях, которые соответствуют типу.
В приложении настраивается корневая папка с артефактами и в ней можно создавать подпапки ui/form, model/type и тд.
По умолчанию корневой папкой с артефактами является <code class="docutils literal notranslate"><span class="pre">src/main/resources/eapps/artifacts</span></code></p>
</section>
<section id="id3">
<h2><a class="toc-backref" href="#id13">Типы артефактов</a><a class="headerlink" href="#id3" title="Ссылка на этот заголовок"></a></h2>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 17%" />
<col style="width: 17%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Тип</p></th>
<th class="head"><p>Микросервис</p></th>
<th class="head"><p>Примечание</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ui/dashboard</p></td>
<td><p>ecos-uiserv</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>ui/action</p></td>
<td><p>ecos-uiserv</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>ui/admin-sections-group</p></td>
<td><p>ecos-uiserv</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>ui/form</p></td>
<td><p>ecos-uiserv</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>ui/i18n</p></td>
<td><p>ecos-uiserv</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>ui/icon</p></td>
<td><p>ecos-uiserv</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>ui/journal</p></td>
<td><p>ecos-uiserv</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>ui/menu</p></td>
<td><p>ecos-uiserv</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>ui/theme</p></td>
<td><p>ecos-uiserv</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>ui/board</p></td>
<td><p>ecos-uiserv</p></td>
<td><p>Канбан доска</p></td>
</tr>
<tr class="row-even"><td><p>model/num-template</p></td>
<td><p>ecos-model</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>model/permissions</p></td>
<td><p>ecos-model</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>model/type</p></td>
<td><p>ecos-model</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>app/ecosapp</p></td>
<td><p>ecos-apps</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>app/artifact-patch</p></td>
<td><p>ecos-apps</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>app/dev-module</p></td>
<td><p>ecos-apps</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>app/config</p></td>
<td><p>ecos-apps</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>integrations/credentials</p></td>
<td><p>ecos-integrations</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>integrations/datasource</p></td>
<td><p>ecos-integrations</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>integrations/file-import-config</p></td>
<td><p>ecos-integrations</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>integrations/recsrc</p></td>
<td><p>ecos-integrations</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>integrations/sync</p></td>
<td><p>ecos-integrations</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>process/cmmn</p></td>
<td><p>ecos-process</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>process/bpmn</p></td>
<td><p>ecos-process</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>process/bpmn-section</p></td>
<td><p>ecos-process</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>notification/file</p></td>
<td><p>ecos-notifications</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>notification/template</p></td>
<td><p>ecos-notifications</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>notification/sender</p></td>
<td><p>ecos-notifications</p></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="id4">
<h2><a class="toc-backref" href="#id14">Переопределение артефактов</a><a class="headerlink" href="#id4" title="Ссылка на этот заголовок"></a></h2>
<p>Для переопределения артефактов можно создать папку с именем override в корне директории с артефактами.</p>
<p>Пример структуры папок:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">eapps</span><span class="p">:</span>
  <span class="o">-</span> <span class="n">artifacts</span><span class="p">:</span>
      <span class="o">-</span> <span class="n">ui</span><span class="p">:</span>
          <span class="o">-</span> <span class="n">form</span><span class="p">:</span>
              <span class="o">-</span> <span class="n">some</span><span class="o">-</span><span class="n">form</span><span class="o">.</span><span class="n">json</span>
          <span class="o">-</span> <span class="n">journal</span><span class="p">:</span>
              <span class="o">-</span> <span class="n">some</span><span class="o">-</span><span class="n">journal</span><span class="o">.</span><span class="n">yml</span>
      <span class="o">-</span> <span class="n">override</span><span class="p">:</span>
          <span class="o">-</span> <span class="n">ui</span><span class="p">:</span>
              <span class="o">-</span> <span class="n">form</span><span class="p">:</span>
                  <span class="o">-</span> <span class="n">some</span><span class="o">-</span><span class="n">form</span><span class="o">.</span><span class="n">json</span>
</pre></div>
</div>
<p>Для формы some-form.json будет создан патч с типом override и порядком -100 (по умолчанию). Если требуется настроить порядок,
то следует в корне папки override создать файл <code class="docutils literal notranslate"><span class="pre">meta.yml</span></code>. В нем возможны следующие настройки:</p>
<table class="docutils align-default" id="id10">
<caption><span class="caption-text">Список возможных настроек в override/meta.yml</span><a class="headerlink" href="#id10" title="Постоянная ссылка на таблицу"></a></caption>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Название</p></th>
<th class="head"><p>Тип данных</p></th>
<th class="head"><p>Описание</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>order</p></td>
<td><p>float</p></td>
<td><p>Порядок патча для перезаписи артефакта. Сначала применяются патчи с меньшим порядком.</p></td>
</tr>
<tr class="row-odd"><td><p>scope</p></td>
<td><p>string</p></td>
<td><div class="line-block">
<div class="line">Параметр служит для исключения коллизий идентификаторов override патчей.</div>
<div class="line">Идентификатор патча формируется по следующему шаблону: override[_{{scope}}]$ui/form$some-form</div>
</div>
</td>
</tr>
</tbody>
</table>
<p><strong>Особенности</strong></p>
<ol class="arabic simple">
<li><p>Перезапись артефактов работает вне зависимости от того откуда деплоится основной артефакт</p></li>
</ol>
</section>
<section id="id5">
<h2><a class="toc-backref" href="#id15">Создание нового типа артефакта</a><a class="headerlink" href="#id5" title="Ссылка на этот заголовок"></a></h2>
<ol class="arabic simple">
<li><p>Определяемся в какой микросервис должен попасть артефакт после деплоя (Alfresco ведет себя аналогично микросервисам и тоже может быть целевым приложением для деплоя).</p></li>
<li><p>В целевом приложении находим папку eapps в ресурсах и создаем там подпапки следующего содержания:</p>
<ul class="simple">
<li><p>первый уровень - раздел к которому относится артефакт (обычно 1 раздел == 1 микросервис. Например, ui → ecos-uiserv, integration → ecos-integrations, model → ecos-model и тд.)</p></li>
<li><p>второй уровень - локальный идентификатор типа (action, form, menu, dashboard, type, section и т.д.)</p></li>
</ul>
</li>
</ol>
<p>Не обязательно создавать именно 2 уровня, но желательно. Механизм поддерживает уровни любой вложенности от 1 до ограничений файловой системы).</p>
<div class="admonition note">
<p class="admonition-title">Примечание</p>
<p>Следует учитывать, что создаваемая иерархия директорий будет использована как идентификатор типа артефакта. Поэтому следует внимательно к ней отнестись.</p>
</div>
<ol class="arabic simple" start="3">
<li><p>Создаем в получившейся директории файл type.yml примерно со следующим содержанием:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">modelVersion</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span>

<span class="n">source</span><span class="o">-</span><span class="nb">id</span><span class="p">:</span> <span class="s2">&quot;eform&quot;</span>

<span class="n">controller</span><span class="p">:</span>
    <span class="nb">type</span><span class="p">:</span> <span class="n">json</span>
</pre></div>
</div>
<p><strong>modelVersion</strong> - тип модели. В будущем будет спользоваться для миграции старых артефактов.</p>
<p><strong>source-id</strong> - ID источника данных (RecordsDAO) через который будет доступ к данным артефактам. Это поле необходимо если потребуется механизм разрешения зависимостей на стороне ECOS Apps. Если у артефакта не будет зависимостей, то можно поставить пустую строку.</p>
<p><strong>controller.type</strong> - тип контроллера для типа артефакта. Определяет логику, по которой будут загружаться артефакты из директории и записываться в директорию. json - самый простой и понятный контроллер, который следует использовать при добавлении простых типов артефактов. Для сложных случаев существует script controller, который поддерживает описание логики чтения и записи артефактов на языке groovy (в перспективе добавятся другие языки вроде Kotlin).</p>
<ol class="arabic simple">
<li><p>Описываем хендлер для нашего артефакта:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@Slf4j</span>
<span class="n">все</span> <span class="n">реализаци</span> <span class="n">интерфейса</span> <span class="n">EcosModuleHanlder</span> <span class="n">в</span> <span class="n">контексте</span> <span class="n">будут</span> <span class="n">зарегистрированы</span> <span class="n">автоматически</span>
<span class="nd">@Component</span>
<span class="nd">@RequiredArgsConstructor</span>
<span class="n">public</span> <span class="k">class</span> <span class="nc">FormModuleHandler</span> <span class="n">implements</span> <span class="n">EcosModuleHandler</span><span class="o">&lt;</span><span class="n">EcosFormModel</span><span class="o">&gt;</span> <span class="p">{</span>

    <span class="n">private</span> <span class="n">final</span> <span class="n">EcosFormService</span> <span class="n">formService</span><span class="p">;</span>

    <span class="n">При</span> <span class="n">деплое</span> <span class="n">артефакта</span> <span class="n">он</span> <span class="n">попадает</span> <span class="n">в</span> <span class="n">этот</span> <span class="n">метод</span>
    <span class="nd">@Override</span>
    <span class="n">public</span> <span class="n">void</span> <span class="n">deployModule</span><span class="p">(</span><span class="nd">@NotNull</span> <span class="n">EcosFormModel</span> <span class="n">formModel</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Form module received: &quot;</span> <span class="o">+</span> <span class="n">formModel</span><span class="o">.</span><span class="n">getId</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="n">formModel</span><span class="o">.</span><span class="n">getFormKey</span><span class="p">());</span>
        <span class="n">formService</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">formModel</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="n">callback</span> <span class="n">для</span> <span class="n">отправки</span> <span class="n">изменного</span> <span class="n">артефакта</span> <span class="n">в</span> <span class="n">ECOS</span> <span class="n">Apps</span><span class="o">.</span> <span class="n">Нужен</span> <span class="n">для</span> <span class="n">ведения</span> <span class="n">истории</span> <span class="n">всех</span> <span class="n">ревизий</span>
    <span class="nd">@Override</span>
    <span class="n">public</span> <span class="n">void</span> <span class="n">listenChanges</span><span class="p">(</span><span class="nd">@NotNull</span> <span class="n">Consumer</span><span class="o">&lt;</span><span class="n">EcosFormModel</span><span class="o">&gt;</span> <span class="n">consumer</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">formService</span><span class="o">.</span><span class="n">addChangeListener</span><span class="p">(</span><span class="n">consumer</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="n">метод</span><span class="p">,</span> <span class="n">который</span> <span class="n">вызывается</span> <span class="n">перед</span> <span class="n">деплоем</span><span class="o">.</span> <span class="n">Если</span> <span class="n">он</span> <span class="n">вернет</span> <span class="n">null</span><span class="p">,</span> <span class="n">то</span> <span class="n">деплой</span> <span class="n">артефакта</span> <span class="n">не</span> <span class="n">произойдет</span>
    <span class="nd">@Nullable</span>
    <span class="nd">@Override</span>
    <span class="n">public</span> <span class="n">ModuleWithMeta</span><span class="o">&lt;</span><span class="n">EcosFormModel</span><span class="o">&gt;</span> <span class="n">prepareToDeploy</span><span class="p">(</span><span class="nd">@NotNull</span> <span class="n">EcosFormModel</span> <span class="n">formModule</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">getModuleMeta</span><span class="p">(</span><span class="n">formModule</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="n">Получение</span> <span class="n">метаданных</span> <span class="n">по</span> <span class="n">артефакту</span> <span class="p">(</span><span class="n">его</span> <span class="n">ID</span> <span class="n">и</span> <span class="n">зависимости</span><span class="p">)</span>
    <span class="nd">@NotNull</span>
    <span class="nd">@Override</span>
    <span class="n">public</span> <span class="n">ModuleWithMeta</span><span class="o">&lt;</span><span class="n">EcosFormModel</span><span class="o">&gt;</span> <span class="n">getModuleMeta</span><span class="p">(</span><span class="nd">@NotNull</span> <span class="n">EcosFormModel</span> <span class="n">formModule</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">new</span> <span class="n">ModuleWithMeta</span><span class="o">&lt;&gt;</span><span class="p">(</span><span class="n">formModule</span><span class="p">,</span> <span class="n">new</span> <span class="n">ModuleMeta</span><span class="p">(</span><span class="n">formModule</span><span class="o">.</span><span class="n">getId</span><span class="p">(),</span> <span class="n">Collections</span><span class="o">.</span><span class="n">emptyList</span><span class="p">()));</span>
    <span class="p">}</span>

    <span class="n">ID</span> <span class="n">типа</span> <span class="n">артефакта</span><span class="p">,</span> <span class="n">для</span> <span class="n">которого</span> <span class="n">мы</span> <span class="n">описали</span> <span class="n">Handler</span><span class="o">.</span> <span class="n">Должен</span> <span class="n">соответствовать</span> <span class="n">иерархии</span> <span class="n">папок</span> <span class="n">из</span> <span class="n">п</span><span class="mf">.2</span>
    <span class="nd">@NotNull</span>
    <span class="nd">@Override</span>
    <span class="n">public</span> <span class="n">String</span> <span class="n">getModuleType</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s2">&quot;ui/form&quot;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>На этом описание типа артефакта можно считать законченным. Можно класть <strong>.json</strong> файлы в <code class="docutils literal notranslate"><span class="pre">ecos-app/ui/form</span></code> (для alfresco это <code class="docutils literal notranslate"><span class="pre">{alfresco_module_id}/src/main/resources/alfresco/module/{alfresco_module_id}</span></code>) где вместо ui/form будет тип из п.2.</p>
<p>При добавлении нового типа перезагрузки требует только микросервис, где мы этот тип описываем.</p>
</section>
<section id="yaml">
<span id="ecos-artifacts-yaml"></span><h2><a class="toc-backref" href="#id16">YAML формат артефакта</a><a class="headerlink" href="#yaml" title="Ссылка на этот заголовок"></a></h2>
<p>С версии 3.25.0 ядра community добавлена поддержка формата yaml для описания артефактов. Версия формата YAML 1.2</p>
<p>Описывать в виде yaml можно любые артефакты, которые загружаются в json формате (типы, журналы, формы и др.).</p>
<p>После прочтения yaml файл будет преобразован в json и далее в таком виде и попадет на целевой микросервис.</p>
<p>При скачивании артефакта из журнала мы все равно будем получать json вне зависимости от того как описана исходная конфигурация.</p>
<p>Пример описания журнала форм:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">id</span><span class="p">:</span> <span class="n">ecos</span><span class="o">-</span><span class="n">forms</span>
<span class="n">label</span><span class="p">:</span> <span class="p">{</span> <span class="n">ru</span><span class="p">:</span> <span class="n">Формы</span><span class="p">,</span> <span class="n">en</span><span class="p">:</span> <span class="n">Forms</span> <span class="p">}</span>

<span class="n">typeRef</span><span class="p">:</span> <span class="n">emodel</span><span class="o">/</span><span class="nb">type</span><span class="nd">@form</span>
<span class="n">sourceId</span><span class="p">:</span> <span class="n">uiserv</span><span class="o">/</span><span class="n">eform</span>

<span class="n">attributes</span><span class="p">:</span>
  <span class="n">actionFormatter</span><span class="p">:</span> <span class="s1">&#39;&#39;</span> <span class="c1">#include include/legacy-actions.js</span>

<span class="n">actions</span><span class="p">:</span>
  <span class="o">-</span> <span class="n">uiserv</span><span class="o">/</span><span class="n">action</span><span class="nd">@ecos</span><span class="o">-</span><span class="n">module</span><span class="o">-</span><span class="n">download</span>
  <span class="o">-</span> <span class="n">uiserv</span><span class="o">/</span><span class="n">action</span><span class="nd">@delete</span>
  <span class="o">-</span> <span class="n">uiserv</span><span class="o">/</span><span class="n">action</span><span class="nd">@edit</span>

<span class="n">columns</span><span class="p">:</span>

  <span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">moduleId</span>
    <span class="n">label</span><span class="p">:</span> <span class="p">{</span> <span class="n">ru</span><span class="p">:</span> <span class="n">Идентификатор</span><span class="p">,</span> <span class="n">en</span><span class="p">:</span> <span class="n">Id</span> <span class="p">}</span>

  <span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">formKey</span>
    <span class="n">label</span><span class="p">:</span> <span class="p">{</span> <span class="n">ru</span><span class="p">:</span> <span class="n">Ключ</span> <span class="n">формы</span><span class="p">,</span> <span class="n">en</span><span class="p">:</span> <span class="n">Form</span> <span class="n">key</span> <span class="p">}</span>

  <span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">title</span>
    <span class="n">label</span><span class="p">:</span> <span class="p">{</span> <span class="n">ru</span><span class="p">:</span> <span class="n">Название</span><span class="p">,</span> <span class="n">en</span><span class="p">:</span> <span class="n">Name</span> <span class="p">}</span>

  <span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">description</span>
    <span class="n">label</span><span class="p">:</span> <span class="p">{</span> <span class="n">ru</span><span class="p">:</span> <span class="n">Описание</span><span class="p">,</span> <span class="n">en</span><span class="p">:</span> <span class="n">Description</span> <span class="p">}</span>
</pre></div>
</div>
<p>Возможности и особенности формата (ст - стандарные возможности, нм - наша модификация):</p>
<ol class="arabic simple">
<li><p>(ст) YAML 1.2 - это надмножество формата JSON. Из этого следует, что можно просто изменить расширение у артефакта с <strong>.json</strong> на <strong>.yaml</strong> и все будет работать как раньше без дополнительных изменений.</p></li>
<li><p>(нм) Поддержка #include, которая позволяет включать содержимое внешних файлов в текущую конфигурацию.</p></li>
</ol>
<p>Общий вид использования: somekey: <code class="docutils literal notranslate"><span class="pre">''</span> <span class="pre">#include</span> <span class="pre">filename</span></code></p>
<p>На месте ‘“ могут быть следующие значения: ‘’, ““ (для импорта содержимого файла как текста) и {} (для импорта внешней yaml конфигурации).</p>
<p>filename - относительный путь до включаемого файла.</p>
<p>При чтении конфигурации все места с #import будут заменены на содержимое указанного файла (если будет два include одного файла, то он дважды добавится в конфиг)</p>
<ol class="arabic simple" start="3">
<li><p>(ст) Поддержка переиспользования частей конфига ( <a class="reference external" href="https://confluence.atlassian.com/bitbucket/yaml-anchors-960154027.html">https://confluence.atlassian.com/bitbucket/yaml-anchors-960154027.html</a> ):</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">some</span><span class="o">-</span><span class="n">reusable</span><span class="o">-</span><span class="n">value</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">my</span><span class="o">-</span><span class="n">anchor</span>
  <span class="n">aa</span><span class="p">:</span> <span class="n">bb</span>
  <span class="n">cc</span><span class="p">:</span> <span class="n">dd</span>

<span class="n">other</span><span class="o">-</span><span class="n">key</span><span class="p">:</span> <span class="o">*</span><span class="n">my</span><span class="o">-</span><span class="n">anchor</span>
<span class="n">other2</span><span class="o">-</span><span class="n">key</span><span class="p">:</span> <span class="o">*</span><span class="n">my</span><span class="o">-</span><span class="n">anchor</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>(нм) Поддержка переиспользование частей конфига с переопределением значений (полу-стандартный механизм, но используемая библиоткека его не поддерживала):</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">some</span><span class="o">-</span><span class="n">reusable</span><span class="o">-</span><span class="n">value</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">my</span><span class="o">-</span><span class="n">anchor</span>
  <span class="n">aa</span><span class="p">:</span> <span class="n">bb</span>
  <span class="n">cc</span><span class="p">:</span> <span class="n">dd</span>

<span class="n">other</span><span class="o">-</span><span class="n">key</span><span class="p">:</span>
  <span class="o">&lt;&lt;</span><span class="p">:</span> <span class="o">*</span><span class="n">my</span><span class="o">-</span><span class="n">anchor</span>
  <span class="n">cc</span><span class="p">:</span> <span class="n">ee</span>
</pre></div>
</div>
<p>В other-key мы получим {“aa”: “bb“, “cc“: “ee“}</p>
</section>
<section id="id6">
<h2><a class="toc-backref" href="#id17">Патчи для артефактов</a><a class="headerlink" href="#id6" title="Ссылка на этот заголовок"></a></h2>
<p>С версии ecos-apps 1.9.0 добавлена поддержка патчей для артефактов. Патчи сами являются артефактами и могут быть так же пропатчены.</p>
<p>Патчи служат заменой механизма override, когда мы в артефакте заказчика полностью перезаписывали файлы конфигурации. Как показала практика такой подход приводит к множеству багов при переходе на новую версию коробки т.к. базовые конфигурации со временем меняются.</p>
<p>Патчи обновляют целевой артефакт “на лету” при каждом изменении артефакта или самого патча. Например, удалив патч в журнале мы увидим через 3-7 секунд, что изменения, которые он накладывал откатились и артефакт приобрел стандартную конфигурацию.</p>
<p>Список патчей в системе можно посмотреть в <strong>системных журналах → патчи артефактов</strong>.</p>
<p>Так же для них действуют возможности, которые описаны в разделе «YAML формат артефактов».</p>
<p>Если менять запись, на которую действует патч через интерфейс, то патч сам не переприменится. Если загружать новую версию артефакта через <strong>ecos-apps</strong> (подкладывая в target или при перезапуске сервера), то патч применится.</p>
<p>Формат патча:</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 8%" />
<col style="width: 8%" />
<col style="width: 8%" />
<col style="width: 8%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Поле</p></th>
<th class="head"><p>Тип</p></th>
<th class="head"><p>Обязательность</p></th>
<th class="head"><p>Значение по умолчанию</p></th>
<th class="head"><p>Описание</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>order</strong></p></td>
<td><p>Float</p></td>
<td><p>Нет</p></td>
<td><p>0</p></td>
<td><div class="line-block">
<div class="line">Порядок патча.</div>
<div class="line">Если в системе есть несколько патчей для одного артефакта. то они применяются в соответствии с этим порядком от меньшего к большему.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p><strong>id</strong></p></td>
<td><p>String</p></td>
<td><p>Да</p></td>
<td><p><cite>-</cite></p></td>
<td><div class="line-block">
<div class="line">Идентификатор.</div>
<div class="line">Уникальный среди всех патчей для артефактов в системе.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p><strong>target</strong></p></td>
<td><p>ModuleRef</p></td>
<td><p>Да</p></td>
<td><p><cite>-</cite></p></td>
<td><div class="line-block">
<div class="line">Целевой артефакт, который будет пропатчен.</div>
<div class="line">Записывается в виде <code class="docutils literal notranslate"><span class="pre">тип_артефакта$локальный_id</span></code>. Пример: <code class="docutils literal notranslate"><span class="pre">ui/journal$ecos-journals</span></code></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p><strong>type</strong></p></td>
<td><p>String</p></td>
<td><p>Да</p></td>
<td><p><cite>-</cite></p></td>
<td><div class="line-block">
<div class="line">Тип патча.</div>
<div class="line">На данный момент поддерживается только json тип.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p><strong>config</strong></p></td>
<td><p>ObjectData</p></td>
<td><p>Да</p></td>
<td><p><cite>-</cite></p></td>
<td><div class="line-block">
<div class="line">Конфигурация патча</div>
<div class="line"><br /></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Патчи описываются в <strong>ecos-app/module/app/module-patch</strong> директории (для alfresco <strong>{moduleId}-repo/src/main/resources/alfresco/module/{moduleId}-repo/app/module-patch</strong>)</p>
<section id="id7">
<h3>Типы патчей<a class="headerlink" href="#id7" title="Ссылка на этот заголовок"></a></h3>
<section id="json">
<h4>Тип патча “json”<a class="headerlink" href="#json" title="Ссылка на этот заголовок"></a></h4>
<p>В конфигурации указывается 1 параметр - <strong>operations</strong> с типом <strong>“массив объектов”</strong>.</p>
<p>Все операции из массива <strong>operations</strong> применяются последовательно к результату изменений предыдущей операции.</p>
<p>Тип операции определяется в ключе op и может быть следующим:</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 80%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>op</p></th>
<th class="head"><p>Описание</p></th>
<th class="head"><p>Параметры</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>add</strong></p></td>
<td><p>Добавить элемент или массив элементов в массив по пути.</p></td>
<td><div class="line-block">
<div class="line"><strong>path</strong> - JsonPath до массива, в который нужно добавить элемент</div>
<div class="line"><strong>value</strong> - значение или массив значений, которые следует добавить</div>
<div class="line"><strong>idx</strong> - индекс, по которому следует добавить значение. По умолчанию значение добавляется в конец. Можно указывать значения вне диапазона существующего массива. В таком случае элементы будут добавляться или в начало или в конец.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p><strong>set</strong></p></td>
<td><p>Установить явное значение любому полю.</p></td>
<td><div class="line-block">
<div class="line"><strong>path</strong> - JsonPath до элемента, в который нужно поместить value</div>
<div class="line"><strong>key</strong> - опциональное поле, которое определяет ключ, по которому следует поместить значение</div>
<div class="line"><strong>value</strong> - значение или массив значений, которые следует установить</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p><strong>remove</strong></p></td>
<td><p>Удалить элемент из конфигурации</p></td>
<td><div class="line-block">
<div class="line"><strong>path</strong> - JsonPath до элемента, в который нужно удалить</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p><strong>rename-key</strong></p></td>
<td><p>Переименовать ключ в объекте внутри конфигурации.</p></td>
<td><div class="line-block">
<div class="line"><strong>path</strong> - JsonPath до объекта, в котором нужно переименовать ключ.</div>
<div class="line"><strong>oldKey</strong> - старое наименование ключа</div>
<div class="line"><strong>newKey</strong> - новое наименование ключа</div>
</div>
</td>
</tr>
</tbody>
</table>
</section>
<section id="id8">
<h4>Примеры<a class="headerlink" href="#id8" title="Ссылка на этот заголовок"></a></h4>
<p>Изменить атрибут для формы:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>id: change-label-for-form-field

name:
  ru: Изменить название кнопки на форме
  en: Change button label on form

target: ui/form$ECOS_FORM

type: json
config:
  operations:
    - { op: set, path: &#39;$..[?(@.key == &quot;localization&quot;)].label&#39;, value: &#39;Свое название для кнопки локализации&#39; }
</pre></div>
</div>
<p>Добавить действие для типа:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>id: add-some-action-for-case

name:
  ru: Добавить действия для кейса
  en: Add actions for case

target: model/type$cat-doc-type-general-case

type: json
config:
  operations:
    - { op: add, path: &#39;actions&#39;, value: &#39;uiserv/action@pdf-content-with-barcode&#39; }
</pre></div>
</div>
<p>Изменить текст в локализации по ключу:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>id: change-ui-admin-localization

name:
  ru: Изменить локализацию для раздела администратора
  en: Change localization for admin section

target: ui/i18n$menu-messages

type: json
config:
  operations:
    - { op: set, path: &#39;$[&quot;messages&quot;][&quot;menu.header.admin-tools&quot;][1]&#39;, value: &#39;Опциональный заголовок для меню администратора&#39; }
</pre></div>
</div>
<p>Удалить действие:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>id: delete-action

name:
  ru: Удалить действие из типа
  en: Delete action from type

target: model/type$contracts-cat-doctype-contract

type: json
config:
  operations:
    - { op: remove, path: &#39;$.actions[?(@==\&quot;uiserv/action@edit-in-onlyoffice\&quot;)]&#39;}
</pre></div>
</div>
<p>Изменить значение параметра Конфигурации ECOS some-config-id на 123:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>id: some-patch-id

name:
  ru: Изменение значения параметра конфигурации some-config-id
  en: Change some-config-id config value

target: app/config$app/notifications$some-config-id

type: json
config:
  operations:
    - { op: set, path: &#39;$.value&#39;, value: [ 123 ] }
    - { op: set, path: &#39;$.version&#39;, value: 1 }
</pre></div>
</div>
<p>Пример патча для добавления раздела меню:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">id</span><span class="p">:</span> <span class="n">menu</span><span class="o">-</span><span class="n">change</span><span class="o">-</span><span class="n">test</span>
<span class="n">name</span><span class="p">:</span> <span class="p">{</span><span class="n">ru</span><span class="p">:</span> <span class="n">Добавить</span> <span class="n">раздел</span><span class="p">,</span> <span class="n">en</span><span class="p">:</span> <span class="n">Add</span> <span class="n">section</span> <span class="p">}</span>
<span class="n">target</span><span class="p">:</span> <span class="s1">&#39;ui/menu$default-menu-v1&#39;</span>
<span class="nb">type</span><span class="p">:</span> <span class="n">json</span>
<span class="n">config</span><span class="p">:</span>
  <span class="n">operations</span><span class="p">:</span>
    <span class="o">-</span> <span class="n">op</span><span class="p">:</span> <span class="n">add</span>
      <span class="n">path</span><span class="p">:</span> <span class="s1">&#39;$..[?(@.id == &quot;sections&quot;)].items&#39;</span>
      <span class="n">value</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;custom-meetings-section&quot;</span><span class="p">,</span>
        <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="s2">&quot;ru&quot;</span><span class="p">:</span> <span class="s2">&quot;Совещания&quot;</span>
        <span class="p">},</span>
        <span class="s2">&quot;icon&quot;</span><span class="p">:</span> <span class="s2">&quot;ui/icon@i-leftmenu-meetings&quot;</span><span class="p">,</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;SECTION&quot;</span><span class="p">,</span>
        <span class="s2">&quot;items&quot;</span><span class="p">:</span> <span class="p">[</span>
          <span class="p">{</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;123-123-123-123-123&quot;</span><span class="p">,</span>
            <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="p">{</span>
              <span class="s2">&quot;en&quot;</span><span class="p">:</span> <span class="s2">&quot;Совещания&quot;</span>
            <span class="p">},</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;JOURNAL&quot;</span><span class="p">,</span>
            <span class="s2">&quot;config&quot;</span><span class="p">:</span> <span class="p">{</span>
              <span class="s2">&quot;recordRef&quot;</span><span class="p">:</span> <span class="s2">&quot;uiserv/journal@meetings&quot;</span>
            <span class="p">},</span>
            <span class="s2">&quot;items&quot;</span><span class="p">:</span> <span class="p">[],</span>
            <span class="s2">&quot;allowedFor&quot;</span><span class="p">:</span> <span class="p">[]</span>
          <span class="p">}</span>
        <span class="p">]</span>
      <span class="p">}</span>
</pre></div>
</div>
<p>Пример патча к булевым атрибутам компонента формы:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;operations&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;op&quot;</span><span class="p">:</span> <span class="s2">&quot;set&quot;</span><span class="p">,</span>
      <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;$..[?(@.key==</span><span class="se">\&quot;</span><span class="s2">meetDateTime</span><span class="se">\&quot;</span><span class="s2">)]&quot;</span><span class="p">,</span>
      <span class="s2">&quot;key&quot;</span><span class="p">:</span> <span class="s2">&quot;hidden&quot;</span><span class="p">,</span>
      <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">true</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="id9">
<h2><a class="toc-backref" href="#id18">Отображение артефактов разных категорий</a><a class="headerlink" href="#id9" title="Ссылка на этот заголовок"></a></h2>
<p>В журналах <strong>«Типы данных», «Формы» и «Журналы»</strong> в фильтрах настройки таблицы можно выбрать какую категорию артефакта отражать – бизнес-данные или системные.</p>
<p>В фильтрах по умолчанию стоит Системный тип(форма|журнал)= <strong>НЕТ</strong>.</p>
<p>Если выставить <strong>ДА</strong>, то в списке будут отражены несистемные записи.</p>
<p>Если выставить <strong>Выбрать</strong>, то будут отражены все записи.</p>
<blockquote>
<div><a class="reference internal image-reference" href="../_images/artifact_type.png"><img alt="../_images/artifact_type.png" class="align-center" src="../_images/artifact_type.png" style="width: 600px;" /></a>
</div></blockquote>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Нижняя область">
        <a href="../%D0%91%D0%B0%D0%B7%D0%B0%20%D0%B7%D0%BD%D0%B0%D0%BD%D0%B8%D0%B9%20%D0%BF%D0%BE%20%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B5.html" class="btn btn-neutral float-left" title="Конструктор low-code" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Предыдущая</a>
        <a href="ecos_applications.html" class="btn btn-neutral float-right" title="ECOS Приложения" accesskey="n" rel="next">Следующая <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Citeck.</p>
  </div>

  Собрано при помощи <a href="https://www.sphinx-doc.org/">Sphinx</a> с использованием
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">темы,</a>
    предоставленной <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>